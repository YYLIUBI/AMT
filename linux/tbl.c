#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <sys/ioctl.h>
#include <fcntl.h>
#include <unistd.h>
#include <termios.h>
#include <stdlib.h>
#include <errno.h>
#include <getopt.h>
#include <time.h>
#include <sys/time.h>
#include <linux/rtc.h>
#include <pthread.h>
#include <semaphore.h>
#include <string.h>
#include "AD.h"
#include <math.h>

//#include "type.h"
#include "tbl.h"

unsigned char TblData[3500]={
83	,71	,73	,78	,0	,2	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0,//SGIN 
69	,71	,78	,67	,0	,2	,0	,0	,0	,0	,0	,0	,1	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0,//EGNC 
72	,71	,78	,67	,0	,2	,0	,0	,0	,0	,0	,0	,1	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0,//HGNC 
69	,71	,78	,0	,0	,0	,0	,0	,0	,0	,0	,0	,4	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0,//EGN  
72	,71	,78	,0	,0	,0	,0	,0	,0	,0	,0	,0	,4	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0,//HGN  
65	,67	,68	,67	,0	,2	,0	,0	,0	,0	,0	,0	,1	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0,//ACDC 
65	,67	,68	,72	,0	,2	,0	,0	,0	,0	,0	,0	,1	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0,//ACDH 
76	,80	,70	,82	,0	,2	,0	,0	,0	,0	,0	,0	,16	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0,//LPFR 
76	,70	,82	,81	,0	,2	,0	,0	,0	,0	,0	,0	,50	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0,//LFRQ 
86	,53	,83	,82	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0,//V5SR 
77	,84	,83	,82	,0	,2	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0,//MTSR 
76	,67	,72	,80	,0	,2	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0,//LCHP 
76	,50	,78	,83	,0	,2	,0	,0	,0	,0	,0	,0	,4	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0,//L2NS 
76	,51	,78	,83	,0	,2	,0	,0	,0	,0	,0	,0	,2	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0,//L3NS 
76	,52	,78	,83	,0	,2	,0	,0	,0	,0	,0	,0	,16	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0,//L4NS 
68	,68	,65	,84	,0	,2	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0,//DDAT 
83	,82	,76	,50	,0	,0	,0	,0	,0	,0	,0	,0	,192	,93	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0,//SRL2 
83	,82	,76	,51	,0	,0	,0	,0	,0	,0	,0	,0	,96	,9	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0,//SRL3 
83	,82	,76	,52	,0	,0	,0	,0	,0	,0	,0	,0	,150	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0,//SRL4 
83	,82	,76	,53	,0	,0	,0	,0	,0	,0	,0	,0	,15	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0,//SRL5 
77	,88	,83	,67	,0	,0	,0	,0	,0	,0	,0	,0	,96	,9	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0,//MXSC 
84	,67	,77	,66	,0	,0	,0	,0	,0	,0	,0	,0	,4	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0,//TCMB 
84	,65	,76	,83	,0	,0	,0	,0	,0	,0	,0	,0	,11	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0,//TALS 
84	,88	,80	,82	,0	,255	,255	,0	,0	,0	,0	,0	,60	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0,//TXPR 
84	,66	,86	,79	,0	,2	,0	,0	,0	,0	,0	,0	,1	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0,//TBVO 
84	,66	,86	,73	,0	,0	,0	,0	,0	,0	,0	,0	,1	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0,//TBVI 
73	,78	,73	,84	,0	,0	,0	,0	,0	,0	,0	,0	,1	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0,//INIT 
84	,68	,83	,80	,0	,0	,0	,0	,0	,0	,0	,5	,44	,17	,15	,11	,10	,11	,2	,20	,0	,0	,0	,0	,0,//TDSP 
82	,81	,83	,84	,0	,255	,255	,0	,0	,0	,0	,0	,1	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0,//RQST 
77	,79	,68	,69	,0	,0	,0	,0	,0	,0	,0	,0	,1	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0,//MODE 
68	,73	,83	,75	,0	,0	,0	,0	,0	,0	,0	,0	,0	,128	,137	,83	,0	,0	,0	,0	,0	,0	,0	,0	,0,//DISK 
88	,68	,79	,83	,0	,255	,255	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0,//XDOS 
83	,78	,85	,77	,0	,0	,0	,0	,0	,0	,0	,0	,29	,11	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0,//SNUM 
86	,69	,82	,0	,0	,0	,0	,0	,0	,0	,0	,2	,51	,49	,49	,50	,71	,50	,0	,0	,0	,0	,0	,0	,0,//VER  
72	,87	,0	,0	,0	,0	,0	,0	,0	,0	,0	,2	,77	,84	,85	,53	,65	,0	,0	,0	,0	,0	,0	,0	,0,//HW   
67	,80	,85	,84	,0	,0	,0	,0	,0	,0	,0	,2	,67	,77	,52	,51	,48	,82	,49	,48	,0	,0	,0	,0	,0,//CPUT 
83	,73	,84	,69	,0	,2	,0	,0	,0	,0	,0	,2	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0,//SITE 
67	,77	,80	,89	,0	,255	,255	,0	,0	,0	,0	,4	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0,//CMPY 
83	,82	,86	,89	,0	,255	,255	,0	,0	,0	,0	,4	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0,//SRVY 
80	,77	,73	,84	,0	,255	,255	,0	,0	,0	,0	,4	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0,//PMIT 
76	,79	,85	,84	,0	,255	,255	,0	,0	,0	,0	,4	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0,//LOUT 
83	,73	,84	,78	,0	,255	,255	,0	,0	,0	,0	,2	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0,//SITN 
83	,73	,84	,70	,0	,255	,255	,0	,0	,0	,0	,2	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0,//SITF 
65	,84	,89	,80	,0	,255	,255	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0,//ATYP 
70	,73	,76	,69	,0	,2	,0	,0	,0	,0	,0	,2	,50	,56	,52	,53	,66	,78	,65	,66	,0	,0	,0	,0	,0,//FILE 
70	,78	,65	,77	,0	,2	,0	,0	,0	,0	,0	,0	,1	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0,//FNAM 
70	,76	,69	,78	,0	,2	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0,//FLEN 
65	,81	,83	,84	,0	,0	,0	,0	,0	,0	,0	,0	,9	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0,//AQST 
83	,84	,73	,77	,0	,2	,0	,0	,0	,0	,0	,5	,0	,0	,0	,1	,1	,12	,1	,20	,0	,0	,0	,0	,0,//STIM 
69	,84	,73	,77	,0	,255	,255	,0	,0	,0	,0	,5	,0	,0	,0	,1	,1	,13	,1	,20	,0	,0	,0	,0	,0,//ETIM 
72	,84	,73	,77	,0	,2	,0	,0	,0	,0	,0	,5	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0,//HTIM 
69	,84	,77	,72	,0	,2	,0	,0	,0	,0	,0	,5	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0,//ETMH 
72	,83	,77	,80	,0	,2	,0	,0	,0	,0	,0	,0	,10	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0,//HSMP 
67	,80	,84	,72	,0	,0	,0	,0	,0	,0	,0	,4	,67	,58	,92	,67	,65	,76	,92	,0	,0	,0	,0	,0	,0,//CPTH 
69	,80	,84	,72	,0	,0	,0	,0	,0	,0	,0	,4	,68	,58	,92	,67	,65	,76	,92	,0	,0	,0	,0	,0	,0,//EPTH 
68	,80	,84	,72	,0	,0	,0	,0	,0	,0	,0	,4	,68	,58	,92	,68	,65	,84	,65	,92	,0	,0	,0	,0	,0,//DPTH 
83	,80	,84	,72	,0	,0	,0	,0	,0	,0	,0	,4	,67	,58	,92	,83	,87	,92	,0	,0	,0	,0	,0	,0	,0,//SPTH 
83	,87	,82	,84	,0	,0	,0	,0	,0	,0	,0	,4	,67	,58	,92	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0,//SWRT 
84	,79	,84	,76	,0	,0	,0	,0	,0	,0	,0	,0	,171	,19	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0,//TOTL 
66	,65	,68	,82	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0,//BADR 
78	,79	,66	,70	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0,//NOBF 
83	,65	,84	,82	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0,//SATR 
70	,84	,73	,77	,0	,0	,0	,0	,0	,0	,0	,5	,47	,30	,1	,23	,11	,12	,5	,20	,0	,0	,0	,0	,0,//FTIM 
76	,84	,73	,77	,0	,0	,0	,0	,0	,0	,0	,5	,20	,35	,2	,23	,11	,12	,5	,20	,0	,0	,0	,0	,0,//LTIM 
83	,84	,68	,69	,0	,0	,0	,0	,0	,0	,0	,0	,255	,255	,255	,255	,0	,0	,0	,0	,0	,0	,0	,0	,0,//STDE 
83	,84	,68	,72	,0	,0	,0	,0	,0	,0	,0	,0	,255	,255	,255	,255	,0	,0	,0	,0	,0	,0	,0	,0	,0,//STDH 
67	,65	,76	,83	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0,//CALS 
67	,67	,76	,83	,0	,0	,0	,0	,0	,0	,0	,0	,1	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0,//CCLS 
67	,65	,76	,82	,0	,0	,0	,0	,0	,0	,0	,2	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0,//CALR 
66	,65	,84	,49	,0	,0	,0	,0	,0	,0	,0	,0	,155	,47	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0,//BAT1 
66	,65	,84	,50	,0	,0	,0	,0	,0	,0	,0	,0	,155	,47	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0,//BAT2 
66	,65	,84	,51	,0	,0	,0	,0	,0	,0	,0	,0	,198	,45	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0,//BAT3 
84	,69	,77	,80	,0	,0	,0	,0	,0	,0	,0	,0	,25	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0,//TEMP 
84	,77	,65	,88	,0	,0	,0	,0	,0	,0	,0	,0	,67	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0,//TMAX 
71	,70	,80	,71	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0,//GFPG 
70	,70	,80	,71	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0,//FFPG 
68	,83	,80	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0,//DSP  
67	,72	,69	,88	,0	,0	,0	,0	,0	,0	,0	,0	,1	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0,//CHEX 
67	,72	,69	,89	,0	,0	,0	,0	,0	,0	,0	,0	,2	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0,//CHEY 
67	,72	,72	,88	,0	,0	,0	,0	,0	,0	,0	,0	,3	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0,//CHHX 
67	,72	,72	,89	,0	,0	,0	,0	,0	,0	,0	,0	,4	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0,//CHHY 
67	,72	,72	,90	,0	,0	,0	,0	,0	,0	,0	,0	,5	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0,//CHHZ 
84	,67	,72	,78	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0,//TCHN 
69	,88	,65	,67	,0	,0	,0	,0	,0	,0	,0	,1	,35	,77	,185	,196	,217	,143	,117	,63	,0	,0	,0	,0	,0,//EXAC 
69	,88	,68	,67	,0	,0	,0	,0	,0	,0	,0	,1	,99	,0	,0	,49	,0	,128	,200	,190	,0	,0	,0	,0	,0,//EXDC 
69	,89	,65	,67	,0	,0	,0	,0	,0	,0	,0	,1	,248	,222	,227	,225	,85	,88	,151	,63	,0	,0	,0	,0	,0,//EYAC 
69	,89	,68	,67	,0	,0	,0	,0	,0	,0	,0	,1	,194	,102	,110	,250	,204	,208	,230	,62	,0	,0	,0	,0	,0,//EYDC 
72	,88	,65	,67	,0	,0	,0	,0	,0	,0	,0	,1	,213	,228	,249	,3	,140	,150	,139	,63	,0	,0	,0	,0	,0,//HXAC 
72	,88	,68	,67	,0	,0	,0	,0	,0	,0	,0	,1	,222	,153	,49	,85	,51	,255	,224	,62	,0	,0	,0	,0	,0,//HXDC 
72	,89	,65	,67	,0	,0	,0	,0	,0	,0	,0	,1	,162	,171	,142	,157	,34	,148	,107	,63	,0	,0	,0	,0	,0,//HYAC 
72	,89	,68	,67	,0	,0	,0	,0	,0	,0	,0	,1	,145	,51	,243	,148	,102	,70	,183	,62	,0	,0	,0	,0	,0,//HYDC 
72	,90	,65	,67	,0	,0	,0	,0	,0	,0	,0	,1	,215	,102	,38	,5	,205	,44	,236	,62	,0	,0	,0	,0	,0,//HZAC 
72	,90	,68	,67	,0	,0	,0	,0	,0	,0	,0	,1	,225	,153	,185	,86	,51	,195	,1	,63	,0	,0	,0	,0	,0,//HZDC 
68	,88	,65	,67	,0	,255	,255	,0	,0	,0	,0	,1	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0,//DXAC 
68	,88	,68	,67	,0	,255	,255	,0	,0	,0	,0	,1	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0,//DXDC 
68	,89	,65	,67	,0	,255	,255	,0	,0	,0	,0	,1	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0,//DYAC 
68	,89	,68	,67	,0	,255	,255	,0	,0	,0	,0	,1	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0,//DYDC 
69	,88	,80	,82	,0	,0	,0	,0	,0	,0	,0	,1	,104	,206	,230	,131	,141	,62	,65	,64	,0	,0	,0	,0	,0,//EXPR 
69	,88	,78	,82	,0	,0	,0	,0	,0	,0	,0	,1	,108	,117	,97	,152	,2	,187	,97	,64	,0	,0	,0	,0	,0,//EXNR 
69	,89	,80	,82	,0	,0	,0	,0	,0	,0	,0	,1	,120	,142	,19	,81	,165	,148	,68	,64	,0	,0	,0	,0	,0,//EYPR 
69	,89	,78	,82	,0	,0	,0	,0	,0	,0	,0	,1	,232	,114	,226	,72	,229	,28	,68	,64	,0	,0	,0	,0	,0,//EYNR 
71	,78	,68	,82	,0	,0	,0	,0	,0	,0	,0	,1	,180	,171	,45	,60	,254	,207	,100	,64	,0	,0	,0	,0	,0,//GNDR 
77	,65	,88	,82	,0	,2	,0	,0	,0	,0	,0	,1	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0,//MAXR 
80	,79	,84	,83	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0,//POTS 
69	,88	,82	,0	,0	,255	,255	,0	,0	,0	,0	,0	,176	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0,//EXR  
69	,89	,82	,0	,0	,255	,255	,0	,0	,0	,0	,0	,81	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0,//EYR  
69	,65	,90	,77	,0	,255	,255	,0	,0	,0	,0	,1	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0,//EAZM 
69	,88	,76	,78	,0	,255	,255	,0	,0	,0	,0	,1	,0	,0	,0	,0	,0	,0	,84	,64	,0	,0	,0	,0	,0,//EXLN 
69	,89	,76	,78	,0	,255	,255	,0	,0	,0	,0	,1	,0	,0	,0	,0	,0	,0	,84	,64	,0	,0	,0	,0	,0,//EYLN 
72	,65	,90	,77	,0	,255	,255	,0	,0	,0	,0	,1	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0,//HAZM 
72	,88	,83	,78	,0	,255	,255	,0	,0	,0	,0	,2	,65	,77	,84	,67	,50	,48	,55	,51	,0	,0	,0	,0	,0,//HXSN 
72	,89	,83	,78	,0	,255	,255	,0	,0	,0	,0	,2	,65	,77	,84	,67	,49	,56	,57	,57	,0	,0	,0	,0	,0,//HYSN 
72	,90	,83	,78	,0	,255	,255	,0	,0	,0	,0	,2	,65	,77	,84	,67	,48	,48	,48	,48	,0	,0	,0	,0	,0,//HZSN 
68	,69	,67	,76	,0	,255	,255	,0	,0	,0	,0	,1	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0,//DECL 
78	,82	,69	,70	,0	,255	,255	,0	,0	,0	,0	,0	,3	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0,//NREF 
84	,83	,84	,86	,0	,0	,0	,0	,0	,0	,0	,1	,242	,210	,77	,98	,16	,88	,153	,63	,0	,0	,0	,0	,0,//TSTV 
84	,83	,84	,82	,0	,0	,0	,0	,0	,0	,0	,1	,0	,0	,0	,0	,0	,144	,114	,64	,0	,0	,0	,0	,0,//TSTR 
73	,78	,80	,82	,0	,0	,0	,0	,0	,0	,0	,1	,0	,0	,0	,0	,0	,112	,124	,64	,0	,0	,0	,0	,0,//INPR 
70	,83	,67	,86	,0	,0	,0	,0	,0	,0	,0	,1	,154	,153	,153	,153	,153	,153	,3	,64	,0	,0	,0	,0	,0,//FSCV 
67	,67	,76	,84	,0	,2	,0	,0	,0	,0	,0	,0	,2	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0,//CCLT 
80	,90	,76	,84	,0	,2	,0	,0	,0	,0	,0	,0	,1	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0,//PZLT 
67	,70	,77	,78	,0	,0	,0	,0	,0	,0	,0	,1	,205	,204	,204	,204	,204	,204	,244	,63	,0	,0	,0	,0	,0,//CFMN 
67	,70	,77	,88	,0	,0	,0	,0	,0	,0	,0	,1	,0	,0	,0	,0	,0	,0	,4	,64	,0	,0	,0	,0	,0,//CFMX 
67	,67	,77	,78	,0	,2	,0	,0	,0	,0	,0	,1	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0,//CCMN 
67	,67	,77	,88	,0	,2	,0	,0	,0	,0	,0	,1	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0,//CCMX 
72	,65	,84	,84	,0	,0	,0	,0	,0	,0	,0	,1	,109	,231	,251	,169	,241	,210	,205	,63	,0	,0	,0	,0	,0,//HATT 
72	,78	,79	,77	,0	,2	,0	,0	,0	,0	,0	,1	,0	,0	,0	,0	,0	,0	,89	,64	,0	,0	,0	,0	,0,//HNOM 
72	,65	,77	,80	,0	,2	,0	,0	,0	,0	,0	,1	,145	,237	,124	,63	,53	,94	,202	,191	,0	,0	,0	,0	,0,//HAMP 
67	,80	,72	,67	,0	,2	,0	,0	,0	,0	,0	,1	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0,//CPHC 
78	,85	,84	,67	,0	,0	,0	,0	,0	,0	,0	,5	,22	,35	,2	,23	,11	,12	,5	,20	,0	,0	,0	,0	,0,//NUTC 
78	,83	,65	,84	,0	,0	,0	,0	,0	,0	,0	,0	,8	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0,//NSAT 
76	,70	,73	,88	,0	,0	,0	,0	,0	,0	,0	,5	,21	,35	,2	,23	,11	,12	,5	,20	,0	,0	,0	,0	,0,//LFIX 
84	,83	,89	,78	,0	,0	,0	,0	,0	,0	,0	,5	,0	,28	,1	,23	,11	,12	,5	,20	,0	,0	,0	,0	,0,//TSYN 
67	,76	,83	,84	,0	,0	,0	,0	,0	,0	,0	,0	,4	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0,//CLST 
79	,67	,84	,82	,0	,0	,0	,0	,0	,0	,0	,0	,106	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0,//OCTR 
84	,69	,82	,82	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0,//TERR 
69	,76 ,69 ,86 ,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0,//ELEV 
76	,65 ,84 ,71 ,0	,0	,0	,0	,0	,0	,0	,4	,0	,0	,0	,0	,46 ,0	,0	,0	,0	,0	,44 ,78 ,0, //LATG 
76	,78 ,71 ,71 ,0	,0	,0	,0	,0	,0	,0	,4	,0	,0	,0	,0	,0	,46 ,0	,0	,0	,0	,0	,44, 69 ,//LNGG 
3	,0	,0	,0	,0	,3	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0	,0,//    
};



TableEntryPT DataTbl[140];
int ReadPT(const char *code, void *p)
{
	int i=0;
	for (i=0;i<140;i++)
	{
		if (strstr(DataTbl[i].Code,code)>0)
		{
			switch(DataTbl[i].T)
			{
			case IntPT:*((signed int *)p)=DataTbl[i].V.I;break;
			case FltPT:*((double *)p)=DataTbl[i].V.F;break;
			case UTCPT:
			case AmxPT:memcpy((unsigned char *)p,DataTbl[i].V.utc,8);break;
			case StrPT:memcpy((char *)p,DataTbl[i].V.S,8);break;
			case PosPT:memcpy((char *)p,DataTbl[i].V.P,13);break;
			}
		}
	}
	return 0;
}

int WritePT(const char *code, void *p)
{
	int i=0;
	for (i=0;i<140;i++)
	{
		if (strcmp(DataTbl[i].Code,code)==0)
		{
			switch(DataTbl[i].T)
			{
			case IntPT:DataTbl[i].V.I=*((signed int *)p);break;
			case FltPT:DataTbl[i].V.F=*((double *)p);break;
			case UTCPT:
			case AmxPT:memcpy(DataTbl[i].V.utc,(unsigned char *)p,8);break;
			case StrPT:memcpy(DataTbl[i].V.S,(char *)p,8);break;
			case PosPT:memcpy(DataTbl[i].V.P,(char *)p,13);break;
			}
		}
	}
	return 0;
}
#define name_to_str(name_31415926)  (#name_31415926)
#define SetVal(val) WritePT(name_to_str(val),&val)
unsigned char arg_gain_e = 1;
unsigned char arg_gain_h = 1;
int FastLog2(int x)
{
    float fx;
    unsigned long ix, exp;

    fx = (float)x;
    ix = *(unsigned long*)&fx;
    exp = (ix >> 23) & 0xFF;

    return exp - 127;
}

void tblInit()
{
	FILE *fpStartTBL,*fpDataTBL,*FP;unsigned char buf[25];int i=0,j=0;
		FILE *fp;char name1[5],name2[5];

		fpStartTBL=fopen("StartUp.TBL","rb");
		//fpDataTBL=fopen("Data.TBL","wb");
	
		for (i=0;i<140;i++)
		{
			rewind(fpStartTBL);
			for (j=0;j<245;j++)
			{
				fread(buf,1,25,fpStartTBL);
				memcpy(name1,buf,5);memcpy(name2,(TblData+i*25),5);
				if(strcmp(name1,name2)==0)
				{
					//printf("%s\n",buf);
					memcpy(&TblData[i*25]+12,buf+12,13);
					break;
				}
			}
			memcpy(buf,&TblData[i*25],25);
			memset(&DataTbl[i],0,25);
			memcpy(DataTbl[i].Code,(char *)buf,5);

			unsigned short ushort2;unsigned int uint4;
			memcpy(&ushort2,buf+5,2);memcpy(&uint4,buf+7,4);
			
			DataTbl[i].Grp=ushort2;//TBLDataBase[i][5]+TBLDataBase[i][6]*256;
			DataTbl[i].Smph=uint4;//TBLDataBase[i][7]+TBLDataBase[i][8]*256+TBLDataBase[i][9]*256*256+TBLDataBase[i][10]*256*256*256;
			DataTbl[i].T=buf[11];
			signed int int4;double dou8;memcpy(&int4,buf+12,4);memcpy(&dou8,buf+12,8);
			char MTAMT[2][15]={"AMT Record!","MT Record!"};
			if(strstr(DataTbl[i].Code,"MTSR")) 
				{
					AMTMTFLAG=buf[12];//printf("%s\n",MTAMT[AMTMTFLAG]);
				}
			if(strcmp(DataTbl[i].Code,"EGN")==0) 
				{
					arg_gain_e=int4;//printf("%d\n",FastLog2(arg_gain_e));
				}
			if(strcmp(DataTbl[i].Code,"HGN")==0) 
				{
					arg_gain_h=int4;//printf("%d\n",arg_gain_h);
				}
			switch(buf[11])
			{
				case IntPT:DataTbl[i].V.I=int4;break;
				case FltPT:DataTbl[i].V.F=dou8;break;
				case UTCPT:
				case AmxPT:memcpy(DataTbl[i].V.S,(unsigned char *)(buf+12),8);break;
				case StrPT:memcpy(DataTbl[i].V.S,(char *)(buf+12),8);break;
				case PosPT:memcpy(DataTbl[i].V.P,(char *)(buf+12),13);break;
			}
		}

		double EXPR=10.0,EXNR=10.0,EYPR=10.0,EYNR=10.0,GNDR=100.0;
		int EXR=20,EYR=20,PZIT=1;
		
		SetVal(EXPR);SetVal(EXNR);SetVal(EYPR);SetVal(EYNR);SetVal(GNDR);
		SetVal(EXR);SetVal(EYR);SetVal(PZIT);
		//WritePT("FILE","ZENGDIAB");
		/*	FP=fopen("test.TBL","wb");
		for (i=0;i<140;i++)
		{
			fwrite(&DataTbl[i], 1, 25, FP);
		}
		fclose(FP);

		fwrite(TblData, 1, 3500, fpDataTBL);
	
		
		fclose(fpDataTBL);*/fclose(fpStartTBL);

}


